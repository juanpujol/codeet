"use strict";angular.module("codeet",["ngRoute","ui.ace"]).config(["$locationProvider","$sceProvider",function(a,b){a.hashPrefix("!"),b.enabled(!1)}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/editor.html",controller:"EditorCtrl"})}]),angular.element(document).ready(function(){angular.bootstrap(angular.element(document),["codeet"])}),angular.module("codeet").controller("EditorCtrl",["$scope","$rootScope","$routeParams",function(a,b,c){function d(b){if(b.ctrlKey||b.metaKey)switch(String.fromCharCode(b.which).toLowerCase()){case"s":b.preventDefault(),a.save()}}a.$on("destroy",function(){$(window).unbind("keydown",d)}),$(window).bind("keydown",d),console.log(a,b),a.$watch("editorForm",function(a){b.editorForm=a}),a.document={data:{name:"Untitled Document",body:""}},b.$watch("codeetDocument",function(b){b&&(a.document=b,a.editorForm.$setPristine())}),a.aceLoaded=function(){window.opener&&window.opener.postMessage({message:"codeet-loaded"},c.origin)},a.save=function(){a.editorForm.$dirty&&a.document&&a.document.opener&&(a.document.data.message="codeet-save",a.document.opener.source.postMessage(a.document.data,a.document.opener.origin),a.editorForm.$setPristine(),b.$$phase||b.$apply())},a.close=function(){window.close(),window.opener&&window.opener.postMessage({message:"codeet-closed"},c.origin)}}]),angular.module("codeet").directive("uiAce",["$rootScope",function(){return{link:function(a,b){var c,d,e;b.css({fontSize:"20px"}),a.aceConfig={theme:"twilight",mode:"html",onLoad:a.aceLoaded,require:["ace/ext/emmet"],advanced:{enableEmmet:!0}},c=ace.edit("editor"),c.setShowPrintMargin(!1),d=ace.require("ace/ext/statusbar").StatusBar,e=new d(c,document.getElementById("statusbar"))}}}]);